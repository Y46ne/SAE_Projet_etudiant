{% extends "base.html" %}

{% block title %}{{ bien.nom_bien or 'Bien sans nom' }} - DÃ©tails{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/detail_bien.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="header-card">
        <div class="header-top">
            <div class="title-section">
                <div class="icon-box">ğŸ“¦</div>
                <div class="title-text">
                    <h1>{{ bien.nom_bien or 'Nom inconnu' }}</h1>
                    <div class="tags">
                        <span class="tag tag-blue">{{ bien.categorie or 'Non renseignÃ©' }}</span>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <a href="{{ url_for('modifier_bien', bien_id=bien.id_bien) }}" class="btn btn-warning">âœï¸ Modifier</a>
                <form action="{{ url_for('supprimer_bien', bien_id=bien.id_bien) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Supprimer ce bien ?')">ğŸ—‘ï¸ Supprimer</button>
                </form>
            </div>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <div class="info-icon">ğŸ’¶</div>
                <div class="info-label">Prix Achat</div>
                <div class="info-value">{{ bien.prix_achat if bien.prix_achat is not none else 'Non renseignÃ©' }} â‚¬</div>
            </div>
            <div class="info-item">
                <div class="info-icon">ğŸ“…</div>
                <div class="info-label">Date Achat</div>
                <div class="info-value">{{ bien.date_achat.strftime('%d/%m/%Y') if bien.date_achat else 'Non renseignÃ©' }}</div>
            </div>
            <div class="info-item">
                <div class="info-icon">ğŸ </div>
                <div class="info-label">Logement</div>
                <div class="info-value">
                    {{ bien.piece.logement.nom_logement if bien.piece and bien.piece.logement else 'Non renseignÃ©' }}
                </div>
            </div>
            <div class="info-item">
                <div class="info-icon">ğŸ“</div>
                <div class="info-label">PiÃ¨ce</div>
                <div class="info-value">
                    {{ bien.piece.nom_piece if bien.piece else 'Non renseignÃ©' }}
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-grid">
        <div class="media-card">
            <div class="media-header">
                <h3>ğŸ–¼ï¸ Photos</h3>
                <span class="media-count">({{ bien.photos|length if bien.photos else 0 }})</span>
            </div>
            <div class="media-list">
                {% if bien.photos %}
                    {% for photo in bien.photos %}
                    <div class="media-item">
                        <div class="media-info">
                            <span class="media-icon">ğŸ–¼ï¸</span>
                            <span class="media-name">{{ photo.titre or 'Photo' }}</span>
                        </div>
                        <a href="{{ url_for('static', filename='uploads/' + photo.fichier) }}" download class="download-btn">â¬‡ï¸</a>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="empty-state"><p>Aucune photo</p></div>
                {% endif %}
            </div>
        </div>

        <div class="media-card">
            <div class="media-header">
                <h3>ğŸ“„ Documents</h3>
                <span class="media-count">({{ bien.documents|length if bien.documents else 0 }})</span>
            </div>
            <div class="media-list">
                {% if bien.documents %}
                    {% for doc in bien.documents %}
                    <div class="media-item">
                        <div class="media-info">
                            <span class="media-icon">ğŸ“„</span>
                            <span class="media-name">{{ doc.titre or 'Document' }}</span>
                        </div>
                        <a href="{{ url_for('static', filename='uploads/' + doc.fichier) }}" download class="download-btn">â¬‡ï¸</a>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="empty-state"><p>Aucun document</p></div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
