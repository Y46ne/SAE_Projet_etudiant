{% extends "base.html" %}

{% block title %}{{ bien.nom_bien or 'Bien sans nom' }} - DÃ©tails{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/detail_bien.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="header-card">
        <div class="header-top">
            <div class="title-section">
                <div class="icon-box">ğŸ“¦</div>
                <div class="title-text">
                    <h1>{{ bien.nom_bien or 'Nom inconnu' }}</h1>
                    <div class="tags">
                        <span class="tag tag-blue">{{ bien.categorie or 'Non renseignÃ©' }}</span>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <a href="{{ url_for('modifier_bien', bien_id=bien.id_bien) }}" class="btn btn-warning">âœï¸ Modifier</a>
                <form action="{{ url_for('supprimer_bien', bien_id=bien.id_bien) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Supprimer ce bien ?')">ğŸ—‘ï¸ Supprimer</button>
                </form>
            </div>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <div class="info-icon">ğŸ’¶</div>
                <div class="info-label">Valeur Actuelle</div>
                <div class="info-value">{{ bien.valeur_actuelle if bien.valeur_actuelle is not none else 'Non renseignÃ©' }} â‚¬</div>
            </div>
            <div class="info-item">
                <div class="info-icon">ğŸ“…</div>
                <div class="info-label">Date Achat</div>
                <div class="info-value">{{ bien.date_achat.strftime('%d/%m/%Y') if bien.date_achat else 'Non renseignÃ©' }}</div>
            </div>
            <div class="info-item">
                <div class="info-icon">ğŸ </div>
                <div class="info-label">Logement</div>
                <div class="info-value">
                    {{ bien.piece.logement.nom_logement if bien.piece and bien.piece.logement else 'Non renseignÃ©' }}
                </div>
            </div>
            <div class="info-item">
                <div class="info-icon">ğŸ“</div>
                <div class="info-label">PiÃ¨ce</div>
                <div class="info-value">
                    {{ bien.piece.nom_piece if bien.piece else 'Non renseignÃ©' }}
                </div>
            </div>
        </div>
    </div>

    <div class="media-card" style="max-width: 800px; margin: 2rem auto;">
        <div class="media-header">
            <h3>ğŸ“„ Justificatif</h3>
        </div>
        <div class="media-list">
            {% if bien.justificatif and bien.justificatif.fichier_existe %}
            <div class="media-item">
                <div class="media-info">
                    <span class="media-icon">{% if bien.justificatif.is_image %}ğŸ–¼ï¸{% else %}ğŸ“„{% endif %}</span>
                    <span class="media-name">{{ bien.justificatif.type_justificatif or 'Justificatif' }}</span>
                </div>
                <a href="{{ url_for('static', filename='uploads/' ~ bien.justificatif.chemin_fichier) }}" download class="download-btn">â¬‡ï¸</a>
            </div>
            {% else %}
            <div class="empty-state" style="text-align: center; padding: 1rem; color: #666;">
                <p>Aucun justificatif associÃ©</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
