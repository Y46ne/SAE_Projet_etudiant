{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/mes_logements.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
{% endblock %}

{% block content %}
<div class="p-8">

<h1>Pièces du logement</h1>

<h3>{{ logement.adresse }}</h3>

<p><strong>Nombre de pièces :</strong> {{ logement.pieces|length }}</p>

<table class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>Nom de la pièce</th>
            <th>Surface</th>
            <th>Nombre de biens</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for piece in logement.pieces %}
        <tr>
            <td>{{ piece.nom_piece }}</td>
            <td>{{ piece.surface or "-" }}</td>
            <td>{{ piece.biens|length }}</td>
            <td>
                <a href="{{ url_for('gestion_bien', piece_id=piece.id_piece) }}" title="Voir les biens" class="btn btn-info">Voir biens<i class="fas fa-eye"></i></a>
                <a href="{{ url_for('modifier_piece', piece_id=piece.id_piece) }}" title="Modifier la pièce" class="btn btn-sm btn-warning">Modifier<i class="fas fa-pen"></i></a>
                <form action="{{ url_for('supprimer_piece', piece_id=piece.id_piece) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-danger" title="Supprimer la pièce" onclick="return confirm('Supprimer cette pièce ?')">Supprimer<i class="fas fa-trash"></i></button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{{ url_for('mes_logements') }}" class="btn btn-secondary mt-3">Retour</a>
</div>
{% endblock %}
